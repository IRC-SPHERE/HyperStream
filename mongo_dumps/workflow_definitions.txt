{"_id":{"$oid":"582a44d75dd938af3a70d917"},"workflow_id":"lda_localisation_model_predict","name":"Live Predictions","description":"Deploy the LDA localisation model for live predictions","nodes":[{"stream_name":"location_prediction_models_broadcasted","plate_ids":["H.W"],"channel_id":"memory"},{"stream_name":"rss_per_uid","plate_ids":["H.W"],"channel_id":"memory"},{"stream_name":"predicted_locations_broadcasted","plate_ids":["H.W"],"channel_id":"memory"},{"stream_name":"location_prediction_lda_mk1","plate_ids":["H"],"channel_id":"mongo"},{"stream_name":"rss_per_uid_2s","plate_ids":["H.W"],"channel_id":"memory"},{"stream_name":"rss_raw","plate_ids":["H"],"channel_id":"sphere"},{"stream_name":"every_2s","plate_ids":["H.W"],"channel_id":"memory"}],"factors":[{"tool":{"name":"sphere","version":"0.0.0","parameters":[{"key":"elements","is_function":false,"is_set":false},{"key":"rename_keys","value":false,"is_function":false,"is_set":false},{"key":"annotators","is_function":false,"is_set":false},{"key":"filters","is_function":false,"is_set":false},{"key":"modality","value":"wearable4","is_function":false,"is_set":false}]},"factor_type":"MultiOutputFactor","sources":[],"sinks":["rss_raw"]},{"tool":{"name":"splitter","version":"0.0.0","parameters":[{"key":"mapping","value":{"00:12:4b:ad:8a:04":"A","a0:e6:f8:ad:83:85":"B","00:12:4b:ad:94:81":"C","a0:e6:f8:ad:85:04":"A","a0e6f8ad8784":"D","00124bad8385":"B","a0:e6:f8:ad:87:84":"D","a0e6f8ad9481":"C","0aa05543a5c2":"A","00124bad8a04":"A","00:12:4b:ad:83:85":"B","a0:e6:f8:ad:8a:04":"A","a0e6f8ad8a04":"A","a0:e6:f8:ad:94:81":"C","00124bad9481":"C","a0e6f8ad8504":"A","a0e6f8ad8385":"B","00:12:4b:ad:87:84":"D","00124bad8784":"D"},"is_function":false,"is_set":false},{"key":"element","value":"uid","is_function":false,"is_set":false}]},"factor_type":"MultiOutputFactor","sources":["rss_raw"],"sinks":["rss_per_uid"]},{"tool":{"name":"sliding_window","version":"0.0.0","parameters":[{"key":"upper","value":0.0,"is_function":false,"is_set":false},{"key":"lower","value":-2.0,"is_function":false,"is_set":false},{"key":"increment","value":2.0,"is_function":false,"is_set":false},{"key":"first","value":{"$date":"0001-01-01T00:00:00.000Z"},"is_function":false,"is_set":false}]},"factor_type":"Factor","sources":[],"sinks":["every_2s"]},{"tool":{"name":"sliding_apply","version":"0.0.0","parameters":[{"key":"func","value":"(S'c\\x01\\x00\\x00\\x00\\x04\\x00\\x00\\x00\\x05\\x00\\x00\\x00\\x13\\x00\\x00\\x00so\\x00\\x00\\x00\\x88\\x01\\x00j\\x00\\x00\\x83\\x00\\x00}\\x01\\x00x\\\\\\x00|\\x00\\x00D]T\\x00\\\\\\x02\\x00}\\x02\\x00}\\x03\\x00|\\x03\\x00\\x88\\x00\\x00\\x19|\\x01\\x00k\\x06\\x00rU\\x00t\\x01\\x00|\\x01\\x00|\\x03\\x00\\x88\\x00\\x00\\x19\\x19|\\x03\\x00\\x88\\x02\\x00\\x19\\x83\\x02\\x00|\\x01\\x00|\\x03\\x00\\x88\\x00\\x00\\x19\u003cq\\x13\\x00|\\x03\\x00\\x88\\x02\\x00\\x19|\\x01\\x00|\\x03\\x00\\x88\\x00\\x00\\x19\u003cq\\x13\\x00W|\\x01\\x00S(\\x01\\x00\\x00\\x00N(\\x02\\x00\\x00\\x00t\\x04\\x00\\x00\\x00copyt\\x03\\x00\\x00\\x00max(\\x04\\x00\\x00\\x00t\\x04\\x00\\x00\\x00datat\\x06\\x00\\x00\\x00resultt\\x04\\x00\\x00\\x00timet\\x05\\x00\\x00\\x00value(\\x03\\x00\\x00\\x00t\\x08\\x00\\x00\\x00id_fieldt\\n\\x00\\x00\\x00init_valuet\\x0b\\x00\\x00\\x00value_field(\\x00\\x00\\x00\\x00s_\\x00\\x00\\x00/Users/td6301/dev/IRC-SPHERE_private/HyperStream/scripts/workflows/deploy_localisation_model.pyt\\x04\\x00\\x00\\x00funcT\\x00\\x00\\x00s\\x0c\\x00\\x00\\x00\\x00\\x01\\x0c\\x01\\x13\\x01\\x10\\x01\u0026\\x02\\x16\\x01'\np0\nN(S'aid'\np1\n(dp2\nS'rss'\np3\ntp4\ntp5\n.","is_function":true,"is_set":false}]},"factor_type":"Factor","sources":["every_2s","rss_per_uid"],"sinks":["rss_per_uid_2s"]},{"tool":{"name":"stream_broadcaster","version":"0.0.0","parameters":[{"key":"mapping","value":{"00:12:4b:ad:8a:04":"A","a0:e6:f8:ad:83:85":"B","00:12:4b:ad:94:81":"C","a0:e6:f8:ad:85:04":"A","a0e6f8ad8784":"D","00124bad8385":"B","a0:e6:f8:ad:87:84":"D","a0e6f8ad9481":"C","0aa05543a5c2":"A","00124bad8a04":"A","00:12:4b:ad:83:85":"B","a0:e6:f8:ad:8a:04":"A","a0e6f8ad8a04":"A","a0:e6:f8:ad:94:81":"C","00124bad9481":"C","a0e6f8ad8504":"A","a0e6f8ad8385":"B","00:12:4b:ad:87:84":"D","00124bad8784":"D"},"is_function":false,"is_set":false}]},"factor_type":"MultiOutputFactor","sources":["location_prediction_lda_mk1"],"sinks":["location_prediction_models_broadcasted"]},{"tool":{"name":"localisation_model_predict","version":"0.0.0","parameters":[]},"factor_type":"Factor","sources":["location_prediction_models_broadcasted","rss_per_uid_2s"],"sinks":["predicted_locations_broadcasted"]}],"owner":"TD","online":false}
{"_id":{"$oid":"582a44ee5dd938af65304e3c"},"workflow_id":"list_technicians_walkarounds","name":"localisation from technician's scripted walk through the house, annotation locations","description":"Get the annotations and RSSIs;train a localisation model; test the model;visualise and mine the results","nodes":[{"stream_name":"annotations_raw","plate_ids":["H"],"channel_id":"sphere"},{"stream_name":"experiments_list","plate_ids":["H"],"channel_id":"memory"},{"stream_name":"experiments_dataframe","plate_ids":["H"],"channel_id":"memory"}],"factors":[{"tool":{"name":"sphere","version":"0.0.0","parameters":[{"key":"elements","value":["Experiment"],"is_function":false,"is_set":true},{"key":"rename_keys","value":false,"is_function":false,"is_set":false},{"key":"annotators","value":[0],"is_function":false,"is_set":false},{"key":"filters","value":{},"is_function":false,"is_set":false},{"key":"modality","value":"annotations","is_function":false,"is_set":false}]},"factor_type":"MultiOutputFactor","sources":[],"sinks":["annotations_raw"]},{"tool":{"name":"extract_experiments_from_annotations","version":"0.0.0","parameters":[]},"factor_type":"Factor","sources":["annotations_raw"],"sinks":["experiments_list"]},{"tool":{"name":"meta_instance","version":"0.0.0","parameters":[{"key":"func","value":"(S'c\\x01\\x00\\x00\\x00\\x03\\x00\\x00\\x00\\x05\\x00\\x00\\x00S\\x00\\x00\\x00sA\\x00\\x00\\x00d\\x01\\x00d\\x02\\x00l\\x00\\x00m\\x01\\x00}\\x01\\x00\\x01d\\x01\\x00d\\x03\\x00l\\x02\\x00m\\x03\\x00}\\x02\\x00\\x01|\\x01\\x00|\\x02\\x00|\\x00\\x00j\\x04\\x00d\\x04\\x00\\x19|\\x00\\x00j\\x04\\x00d\\x05\\x00\\x19\\x83\\x02\\x00\\x83\\x01\\x00S(\\x06\\x00\\x00\\x00Ni\\xff\\xff\\xff\\xff(\\x01\\x00\\x00\\x00t\\x17\\x00\\x00\\x00construct_experiment_id(\\x01\\x00\\x00\\x00t\\x0c\\x00\\x00\\x00TimeIntervalt\\x05\\x00\\x00\\x00startt\\x03\\x00\\x00\\x00end(\\x05\\x00\\x00\\x00t\\x11\\x00\\x00\\x00hyperstream.utilsR\\x00\\x00\\x00\\x00t\\x19\\x00\\x00\\x00hyperstream.time_intervalR\\x01\\x00\\x00\\x00t\\x05\\x00\\x00\\x00value(\\x03\\x00\\x00\\x00t\\x08\\x00\\x00\\x00instanceR\\x00\\x00\\x00\\x00R\\x01\\x00\\x00\\x00(\\x00\\x00\\x00\\x00(\\x00\\x00\\x00\\x00sY\\x00\\x00\\x00/Users/td6301/dev/IRC-SPHERE_private/HyperStream/scripts/workflows/display_experiments.pyt\\x04\\x00\\x00\\x00funcI\\x00\\x00\\x00s\\x06\\x00\\x00\\x00\\x00\\x01\\x10\\x01\\x10\\x01'\np0\nNNtp1\n.","is_function":true,"is_set":false}]},"factor_type":"NodeCreationFactor","sources":["experiments_list"],"sinks":[],"output_plate":{"plate_id":"H1.LocalisationExperiment","meta_data_id":"localisation-experiment","description":"Technician localisation walk-around","use_provided_values":false}},{"tool":{"name":"experiments_data_frame_builder","version":"0.0.0","parameters":[]},"factor_type":"Factor","sources":["experiments_list"],"sinks":["experiments_dataframe"]}],"owner":"MK","online":false}
{"_id":{"$oid":"582a44f15dd938af65304e40"},"workflow_id":"lda_localisation_model_learner","name":"localisation from technician's scripted walk through the house, annotation locations","description":"Get the annotations and RSSIs;train a localisation model; test the model;visualise and mine the results","nodes":[{"stream_name":"rss_time","plate_ids":["H.SelectedLocalisationExperiment"],"channel_id":"sphere"},{"stream_name":"annotation_state_2s_windows","plate_ids":["H.SelectedLocalisationExperiment"],"channel_id":"memory"},{"stream_name":"annotation_time","plate_ids":["H.SelectedLocalisationExperiment"],"channel_id":"sphere"},{"stream_name":"experiments_mapping","plate_ids":["H"],"channel_id":"memory"},{"stream_name":"experiments_dataframe","plate_ids":["H"],"channel_id":"memory"},{"stream_name":"annotation_state_location","plate_ids":["H.SelectedLocalisationExperiment"],"channel_id":"memory"},{"stream_name":"experiments_list","plate_ids":["H"],"channel_id":"memory"},{"stream_name":"rss_2s","plate_ids":["H.SelectedLocalisationExperiment"],"channel_id":"memory"},{"stream_name":"annotation_raw_locations","plate_ids":["H"],"channel_id":"sphere"},{"stream_name":"merged_2s_flat","plate_ids":["H"],"channel_id":"memory"},{"stream_name":"experiments_selected","plate_ids":["H"],"channel_id":"assets"},{"stream_name":"location_prediction_lda_mk1","plate_ids":["H"],"channel_id":"memory"},{"stream_name":"dataframe","plate_ids":["H"],"channel_id":"memory"},{"stream_name":"rss_raw","plate_ids":["H"],"channel_id":"sphere"},{"stream_name":"every_2s","plate_ids":["H.SelectedLocalisationExperiment"],"channel_id":"memory"},{"stream_name":"merged_2s","plate_ids":["H.SelectedLocalisationExperiment"],"channel_id":"memory"}],"factors":[{"tool":{"name":"experiments_mapping_builder","version":"0.0.0","parameters":[]},"factor_type":"Factor","sources":["experiments_list","experiments_selected"],"sinks":["experiments_mapping"]},{"tool":{"name":"sphere","version":"0.0.0","parameters":[{"key":"elements","is_function":false,"is_set":false},{"key":"rename_keys","value":false,"is_function":false,"is_set":false},{"key":"annotators","is_function":false,"is_set":false},{"key":"filters","is_function":false,"is_set":false},{"key":"modality","value":"wearable4","is_function":false,"is_set":false}]},"factor_type":"MultiOutputFactor","sources":[],"sinks":["rss_raw"]},{"tool":{"name":"splitter_time_aware_from_stream","version":"0.0.0","parameters":[{"key":"meta_data_id","value":"localisation-experiment","is_function":false,"is_set":false}]},"factor_type":"MultiOutputFactor","sources":["rss_raw"],"sinks":["rss_time"],"splitting_node":"experiments_mapping"},{"tool":{"name":"sphere","version":"0.0.0","parameters":[{"key":"elements","value":["Location"],"is_function":false,"is_set":true},{"key":"rename_keys","value":false,"is_function":false,"is_set":false},{"key":"annotators","value":[0],"is_function":false,"is_set":false},{"key":"filters","value":{},"is_function":false,"is_set":false},{"key":"modality","value":"annotations","is_function":false,"is_set":false}]},"factor_type":"MultiOutputFactor","sources":[],"sinks":["annotation_raw_locations"]},{"tool":{"name":"splitter_time_aware_from_stream","version":"0.0.0","parameters":[{"key":"meta_data_id","value":"localisation-experiment","is_function":false,"is_set":false}]},"factor_type":"MultiOutputFactor","sources":["annotation_raw_locations"],"sinks":["annotation_time"],"splitting_node":"experiments_mapping"},{"tool":{"name":"sliding_window","version":"0.0.0","parameters":[{"key":"upper","value":0.0,"is_function":false,"is_set":false},{"key":"lower","value":-2.0,"is_function":false,"is_set":false},{"key":"increment","value":2.0,"is_function":false,"is_set":false},{"key":"first","value":{"$date":"0001-01-01T00:00:00.000Z"},"is_function":false,"is_set":false}]},"factor_type":"Factor","sources":[],"sinks":["every_2s"]},{"tool":{"name":"annotation_state_location","version":"0.0.0","parameters":[]},"factor_type":"Factor","sources":["every_2s","annotation_time"],"sinks":["annotation_state_location"]},{"tool":{"name":"aligning_window","version":"0.0.0","parameters":[{"key":"upper","value":0.0,"is_function":false,"is_set":false},{"key":"lower","value":-2.0,"is_function":false,"is_set":false}]},"factor_type":"Factor","sources":["annotation_state_location"],"sinks":["annotation_state_2s_windows"]},{"tool":{"name":"sliding_apply","version":"0.0.0","parameters":[{"key":"func","value":"(S'c\\x01\\x00\\x00\\x00\\x04\\x00\\x00\\x00\\x05\\x00\\x00\\x00\\x13\\x00\\x00\\x00sr\\x00\\x00\\x00\\x88\\x01\\x00j\\x00\\x00\\x83\\x00\\x00}\\x01\\x00x_\\x00|\\x00\\x00D]W\\x00\\\\\\x02\\x00}\\x02\\x00}\\x03\\x00|\\x01\\x00j\\x01\\x00|\\x03\\x00\\x88\\x00\\x00\\x19\\x83\\x01\\x00rX\\x00t\\x02\\x00|\\x01\\x00|\\x03\\x00\\x88\\x00\\x00\\x19\\x19|\\x03\\x00\\x88\\x02\\x00\\x19\\x83\\x02\\x00|\\x01\\x00|\\x03\\x00\\x88\\x00\\x00\\x19\u003cq\\x13\\x00|\\x03\\x00\\x88\\x02\\x00\\x19|\\x01\\x00|\\x03\\x00\\x88\\x00\\x00\\x19\u003cq\\x13\\x00W|\\x01\\x00S(\\x01\\x00\\x00\\x00N(\\x03\\x00\\x00\\x00t\\x04\\x00\\x00\\x00copyt\\x07\\x00\\x00\\x00has_keyt\\x03\\x00\\x00\\x00max(\\x04\\x00\\x00\\x00t\\x04\\x00\\x00\\x00datat\\x06\\x00\\x00\\x00resultt\\x04\\x00\\x00\\x00timet\\x05\\x00\\x00\\x00value(\\x03\\x00\\x00\\x00t\\x08\\x00\\x00\\x00id_fieldt\\n\\x00\\x00\\x00init_valuet\\x0b\\x00\\x00\\x00value_field(\\x00\\x00\\x00\\x00s^\\x00\\x00\\x00/Users/td6301/dev/IRC-SPHERE_private/HyperStream/scripts/workflows/learn_localisation_model.pyt\\x04\\x00\\x00\\x00func\\x9a\\x00\\x00\\x00s\\x0c\\x00\\x00\\x00\\x00\\x01\\x0c\\x01\\x13\\x01\\x13\\x01\u0026\\x02\\x16\\x01'\np0\nN(S'aid'\np1\n(dp2\nS'rss'\np3\ntp4\ntp5\n.","is_function":true,"is_set":false}]},"factor_type":"Factor","sources":["annotation_state_2s_windows","rss_time"],"sinks":["rss_2s"]},{"tool":{"name":"aligned_merge","version":"0.0.0","parameters":[{"key":"names","value":["annotations","rssi"],"is_function":false,"is_set":false}]},"factor_type":"Factor","sources":["annotation_state_location","rss_2s"],"sinks":["merged_2s"]},{"tool":{"name":"aggregate_plate","version":"0.0.0","parameters":[{"key":"aggregation_meta_data","value":"localisation-experiment","is_function":false,"is_set":false}]},"factor_type":"Factor","sources":["merged_2s"],"sinks":["merged_2s_flat"]},{"tool":{"name":"localisation_model_learn","version":"0.0.0","parameters":[{"key":"nan_value","value":-110.0,"is_function":false,"is_set":false}]},"factor_type":"Factor","sources":["merged_2s_flat","experiments_selected"],"sinks":["location_prediction_lda_mk1"]}],"owner":"NT","online":false}
